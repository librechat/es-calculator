!function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)t.d(n,a,function(r){return e[r]}.bind(null,a));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=1)}([function(e,r){const t={count:"至少要有15張卡才能使用組隊功能",character_count:"重複角色太多",empty_character:"不能有空白角色",illegal_cardfile:"卡組資料格式錯誤",illegal_value:"卡片數值請用數字填入",illegal_star:"卡片星級請用數字填入，僅限1~5",illegal_dupe:"卡片突破請用數字填入，僅限0~4",illegal_character:"請填入正確角色名稱",illegal_name:"請用文字敘述卡片名稱",illegal_event:"倍卡格式錯誤"},n={colors:["red","blue","yellow"],team_template:{total:0,skillname:"無技能",skillbuff:0,members:[]},card_template:{id:0,star:1,character:"",cardname:"",red:0,blue:0,yellow:0,event:!1,dupe:0},member_template:{id:-1,star:1,character:"",cardname:"",value:0,event:!1,dupe:0},warning:t,level_big:[1e4,11450,13110,15011,17187,19680,22533,25801,29542,33818,38721,44346,50763,58123,66550,76199,87247,99897,114382,130967,149957,171700,196596,225102,257741,295113,337904,387033,443152,5e5],level_postbig:[4e4,46680,54475,63572,74189,89579,101038,117911,137602,160582,187399,218695,255217,297838,347577,405623,473362,552413,644666,75e4],level_emer:[7e4,84700,102487,124009,150051,181560,219687,265821,321643,389188,470917,569809,689481,834256,1e6]};CheckNaturalNum=function(e){return void 0!=e&&!!(Number.isInteger(e)&&e>-1)},CopyByValue=function(e){return JSON.parse(JSON.stringify(e))},Arrangeable=function(e,r){if(e.length<15)return t.count;for(var n=0,a={},l=0;l<r.length;l++)a[r[l]]=0;for(l=0;l<e.length;l++){var o=e[l].character;if(""===o)return t.empty_character;if(void 0===a[o])return t.illegal_character;a[o]<3&&(n++,a[o]++)}return n<15?t.character_count:null},IsLegal=function(e,r){if(void 0==e||null==e)return t.illegal_cardfile;if(e.constructor!==Array)return t.illegal_cardfile;for(var n={},a=0;a<r.length;a++)n[r[a]]=0;for(a=0;a<e.length;a++){if(!CheckNaturalNum(e[a].red)||!CheckNaturalNum(e[a].blue)||!CheckNaturalNum(e[a].yellow))return t.illegal_value;if(!CheckNaturalNum(e[a].star)||e[a].star>5)return t.illegal_value;if(!CheckNaturalNum(e[a].dupe)||e[a].dupe>4)return t.illegal_value;if("string"!=typeof e[a].character)return t.illegal_character;if(void 0===n[e[a].character])return t.illegal_character;if("string"!=typeof e[a].cardname)return t.illegal_name;if("boolean"!=typeof e[a].event)return t.illegal_event}return null},array_dupe=function(){for(var e=this.concat(),r=0;r<e.length;++r)for(var t=r+1;t<e.length;++t)e[r]===e[t]&&e.splice(t,1);return e},array_equals=function(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var r=0;r<this.length;r++){if(e[r]instanceof Array&&this[r]instanceof Array)return this[r].equals(e[r]);if(e[r]!==this[r])return!1}return!0},ExtendArray=function(){Array.prototype.dupe=array_dupe,Array.prototype.equals=array_equals},e.exports={CheckNaturalNum:CheckNaturalNum,CopyByValue:CopyByValue,ExtendArray:ExtendArray,Arrangeable:Arrangeable,IsLegal:IsLegal,Const:n}},function(e,r,t){t(2),e.exports=t(6)},function(e,r,t){var n=t(0),a=t(3),l=t(4),o=t(5);n.ExtendArray();var u=angular.module("ESCalculator",[]),c=new FileReader;u.controller("CardGroup",["$scope",function(e){e.characters=[],e.redskill=[],e.blueskill=[],e.yellowskill=[],e.redteams=[],e.blueteams=[],e.yellowteams=[],e.cards=[],e.teams={red:e.redteams,blue:e.blueteams,yellow:e.yellowteams},e.skill={},e.color="gray",e.cardcount=15,e.groupstyle=3,e.warning_msg="",e.activeskill=[],e.init=function(){console.log("INITTTT"),console.log(e.color),c.onload=function(r){var t,a=r.target.result;try{t=JSON.parse(a)}catch(r){return console.log(r),void l.toggle_alert(e,!1,n.Const.warning.illegal_cardfile)}var o=n.IsLegal(t,e.characters);if(console.log(o),l.toggle_alert(e,null===o,o),null===o){for(var u=(new Date).getTime(),c=0,i=0;i<t.length;i++)null==t[i].id&&(t[i].id=u+c,c++);e.cards=t,e.cardcount=t.length,e.$apply()}else e.$apply()};var r=n.CopyByValue(n.Const.card_template);r.id=0,e.cards.push(r);for(var t=0;t<3;t++)for(var o=n.Const.colors[t],u=0;u<3;u++){for(var i=n.CopyByValue(n.Const.team_template),m=0;m<5;m++){var s=n.CopyByValue(n.Const.member_template);i.members.push(s)}e.teams[o].push(i)}e.cardcount=e.cards.length,e.characters=a.characters,e.redskill=a.redskill,e.blueskill=a.blueskill,e.yellowskill=a.yellowskill,e.activeskill=[],e.skill={red:e.redskill,blue:e.blueskill,yellow:e.yellowskill}},e.calculate=function(){var r=e.color;e.calculate_color(e.teams[r],e.skill[r])},e.calculate_color=function(e,r){for(var t=0;t<3;t++)o.calculate_total(e[t],r)},e.changecolor=function(r){e.color=r},e.changecardcount=function(){var r=e.cards.length;if((void 0==e.cardcount||null==e.cardcount||e.cardcount<1)&&(e.cardcount=1),r!=e.cardcount){e.cards.length=e.cardcount;var t=(new Date).getTime(),a=0;if(r<e.cards.length)for(var l=r;l<e.cards.length;l++)e.cards[l]=n.CopyByValue(n.Const.card_template),e.cards[l].id=t+a,a++}},e.autoarrangeall=function(){var r=n.Arrangeable(e.cards,e.characters);if(l.toggle_alert(e,null===r,r),null===r)for(var t=n.CopyByValue(e.cards),a=0;a<n.Const.colors.length;a++){var o=n.Const.colors[a];e.arrangebycolor(t,o)}},e.arrangebycolor=function(r,t){var a=n.CopyByValue(e.teams[t]),l=n.CopyByValue(e.skill[t]),u=o.multiple_skill(t,l);o.sort_cards(r,t,0,r.length-1);var c=[];switch(e.groupstyle){case 1:for(var i=0;i<3;i++)a[i]=o.arrange_one(t,r,u,e.skill[t],c);e.teams[t]=a;break;case 2:var m=o.arrange_two(t,r,u,e.skill[t],c);a[0]=m[0],a[1]=m[1],a[2]=o.arrange_one(t,r,u,e.skill[t],c),e.teams[t]=a;break;case 3:e.teams[t]=o.arrange_three(t,r,u,e.skill[t],c,(e,r)=>{var t=e[0]+e[1]+e[2],n=r[0]+r[1]+r[2];if(t===n){var a=e[0]+e[1],l=r[0]+r[1];return a===l?e[0]>r[0]:a>l}return t>n});break;case 4:case 5:case 6:var s=4===e.groupstyle?n.Const.level_big:5===e.groupstyle?n.Const.level_postbig:n.Const.level_emer;console.log(s.length),e.teams[t]=o.arrange_three(t,r,u,e.skill[t],c,(e,r)=>{var t=e[0],n=r[0],a=Math.floor(1.5*(e[0]+e[1])),l=Math.floor(1.5*(r[0]+r[1])),o=2*(e[0]+e[1]+e[2]),u=2*(r[0]+r[1]+r[2]),c=s.findIndex(e=>e>n);c=c<0?s.length:c;var i=s.findIndex(e=>e>l);i=i<0?s.length:i;var m=s.findIndex(e=>e>u);m=m<0?s.length:m;var f=s.findIndex(e=>e>t);f=f<0?s.length:f;var d=s.findIndex(e=>e>a);d=d<0?s.length:d;var b=s.findIndex(e=>e>o);return b=b<0?s.length:b,console.log(t+"+"+a+"+"+o),b===m?d===i?f===c?b<s.length&&o!==u?o>u:d<s.length&&a!==l?a>l:t>n:f>c:d>i:b>m})}},e.clear=function(){e.cardcount=1,e.cards.length=1,e.cards[0]=n.CopyByValue(n.Const.card_template),e.cards[0].id=(new Date).getTime(),angular.element(document.getElementsByName("cardfile")[0]).val(null)},e.download=function(){var r=new Date,t=(r.getMonth()+1).toString();1==t.length&&(t="0"+t);var n=r.getDate().toString();1==n.length&&(n="0"+n);var a="es_cards_"+r.getFullYear()+t+n+".txt",l=JSON.stringify(e.cards),o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(l)),o.setAttribute("download",a),o.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)},e.upload=function(){if(void 0!=event&&void 0!=event.target&&0!=event.target.files.length){var e=event.target.files[0],r=e.name;console.log(r),c.readAsText(e)}},e.addcard=function(r,t){var a,l=(new Date).getTime();console.log(t),(a=t?n.CopyByValue(n.Const.card_template):n.CopyByValue(e.cards[r])).id=l,console.log(a),e.cards.splice(r+1,0,a)},e.removecard=function(r){if(1==e.cards.length){var t=e.cards[0].id;e.cards[0]=n.CopyByValue(n.Const.card_template),e.cards[0].id=t}else e.cards.splice(r,1)},e.$watch("cards",function(){var r=n.Arrangeable(e.cards,e.characters);l.toggle_alert(e,null===r,r),e.cardcount=e.cards.length},!0),e.init()}]),u.directive("customFileChange",function(){return{restict:"A",link:function(e,r,t){var n=e.$eval(t.customFileChange);r.on("change",n)}}}),u.directive("optionValue",function(){return{require:"ngModel",link:function(e,r,t,n){n.$parsers.push(function(e){return null!=e?parseInt(e,10):null}),n.$formatters.push(function(e){return null!=e?""+e:null})}}}),u.filter("floor",function(){return function(e){return Math.floor(e)}}),window.onload=function(){$(".loading").slideUp(500)},$(document).ready(function(){$("#cardcount").keyup(function(e){13==e.keyCode&&$(this).blur()})})},function(e,r){e.exports={characters:["南雲鐵虎","紫之創","真白友也","葵日向","高峯翠","姬宮桃李","仙石忍","葵裕太","天滿光","朱櫻司","春川宙","明星昴流","冰鷹北斗","遊木真","神崎颯馬","乙狩阿多尼斯","逆先夏目","大神晃牙","朔間凜月","衣更真緒","伏見弓弦","鳴上嵐","影片美伽","蓮巳敬人","天祥院英智","羽風薰","瀨名泉","守澤千秋","齋宮宗","鬼龍紅郎","日日樹涉","深海奏汰","朔間零","仁兔成鳴","月永雷歐","青葉紡"],redskill:[{name:"TrickStar",buff:13,members:["明星昴流","冰鷹北斗","衣更真緒","遊木真"]},{name:"UNDEAD",buff:13,members:["大神晃牙","朔間零","乙狩阿多尼斯","羽風薰"]},{name:"輕音部",buff:13,members:["大神晃牙","朔間零","葵日向","葵裕太"]},{name:"弓道部",buff:13,members:["蓮巳敬人","伏見弓弦","朱櫻司","月永雷歐"]},{name:"紅月",buff:10,members:["蓮巳敬人","鬼龍紅郎","神崎颯馬"]},{name:"廣播委員會",buff:10,members:["仁兔成鳴","仙石忍","遊木真"]},{name:"名門子弟",buff:10,members:["天祥院英智","朱櫻司","姬宮桃李"]},{name:"模特經驗者",buff:10,members:["遊木真","瀨名泉","鳴上嵐"]},{name:"空手道部",buff:5,members:["南雲鐵虎","鬼龍紅郎"]},{name:"最愛妹妹",buff:5,members:["月永雷歐","鬼龍紅郎"]},{name:"Switch",buff:10,members:["逆先夏目","春川宙","青葉紡"]}],blueskill:[{name:"流星隊",buff:18,members:["守澤千秋","深海奏汰","仙石忍","南雲鐵虎","高峯翠"]},{name:"學生會",buff:13,members:["天祥院英智","蓮巳敬人","衣更真緒","姬宮桃李"]},{name:"Rabbits",buff:13,members:["仁兔成鳴","天滿光","紫之創","真白友也"]},{name:"陸上部",buff:10,members:["乙狩阿多尼斯","鳴上嵐","天滿光"]},{name:"2wink",buff:5,members:["葵日向","葵裕太"]},{name:"手工藝部",buff:10,members:["齋宮宗","影片美伽","青葉紡"]},{name:"花粉症",buff:5,members:["大神晃牙","衣更真緒"]},{name:"籃球部",buff:13,members:["守澤千秋","明星昴流","衣更真緒","高峯翠"]},{name:"智慧眼鏡",buff:10,members:["蓮巳敬人","遊木真","青葉紡"]},{name:"紅茶部",buff:10,members:["紫之創","天祥院英智","朔間凜月"]},{name:"朔間兄弟",buff:5,members:["朔間零","朔間凜月"]},{name:"圖書委員",buff:2,members:["青葉紡"]}],yellowskill:[{name:"Knights",buff:18,members:["月永雷歐","瀨名泉","朔間凜月","鳴上嵐","朱櫻司"]},{name:"三奇人",buff:10,members:["朔間零","深海奏汰","日日樹涉"]},{name:"海洋生物部",buff:10,members:["深海奏汰","羽風薰","神崎颯馬"]},{name:"演劇部",buff:10,members:["日日樹涉","冰鷹北斗","真白友也"]},{name:"網球部",buff:13,members:["仁兔成鳴","瀨名泉","姬宮桃李","遊木真"]},{name:"fine",buff:13,members:["日日樹涉","天祥院英智","伏見弓弦","姬宮桃李"]},{name:"左撇子",buff:10,members:["天祥院英智","朔間凜月","葵裕太"]},{name:"擅長縫紉",buff:13,members:["鬼龍紅郎","紫之創","齋宮宗","青葉紡"]},{name:"Valkyrie",buff:5,members:["齋宮宗","影片美伽"]},{name:"遊戲研究部",buff:5,members:["逆先夏目","春川宙"]},{name:"忍者同好會",buff:2,members:["仙石忍"]}],activeskill:[{name:"FruitsParlor",buff:13,members:["朱櫻司","天滿光","葵裕太","鳴上嵐"],color:"yellow",describe:"FruitsParlor 黃+13% [ 朱櫻司 + 天滿光 + 葵裕太 + 鳴上嵐 ]"}]}},function(e,r){toggle_alert=function(e,r,t){var n=angular.element(document.getElementById("arrangealert"));r?(e.warning_msg="",n.fadeOut()):(e.warning_msg=t,console.log(e.warning_msg),n.fadeIn())},e.exports={toggle_alert:toggle_alert}},function(e,r,t){var n=t(0);n.ExtendArray(),sort_cards=function(e,r,t,n){if(!(t>=n)){var a=e[t][r];1==e[t].event&&(a=e[t][r]*(.5*e[t].dupe+2));for(var l=t,o=n+1;;){for(;l+1<=n&&card_greater(e[++l],r,a););for(;o-1>=t&&card_less(e[--o],r,a););if(!(l<o))break;var u=e[l];e[l]=e[o],e[o]=u}u=e[t];e[t]=e[o],e[o]=u,sort_cards(e,r,t,o-1),sort_cards(e,r,o+1,n)}},card_to_team=function(e,r){return{id:e.id,star:e.star,character:e.character,cardname:e.cardname,value:e[r],event:e.event,dupe:e.dupe}},card_greater=function(e,r,t){return!0===e.event?value=e[r]*(.5*e.dupe+2):value=e[r],value>t},card_less=function(e,r,t){return!0===e.event?value=e[r]*(.5*e.dupe+2):value=e[r],value<t},calculate_total=function(e,r){for(var t=0,n=0,a="",l=0;l<5;l++){var o=e.members[l].value;!0===e.members[l].event&&(o*=.5*e.members[l].dupe+2),t+=o}return r.filter(function(r){return-1!==r.members.indexOf(e.members[0].character)}).forEach(function(r){for(var t=1,l=1;l<5;l++)e.members[0].character!==e.members[l].character&&-1!==r.members.indexOf(e.members[l].character)&&t++;t==r.members.length&&(n+=r.buff,a=0===a.length?r.name:a+"+"+r.name)}),e.total=Math.floor(t*(100+n)/100),e.skillbuff=n,e.skillname=0===a.length?"無技能":a,e.total},arrange_one=function(e,r,t,a,l){var o=[];t.forEach(function(t){var a=n.CopyByValue(n.Const.team_template);t.members.every(function(t){var n=r.findIndex(function(e){return e.character===t&&-1===l.indexOf(e.id)});return-1!==n&&-1===l.indexOf(r[n].id)&&(a.members.push(card_to_team(r[n],e)),!0)}),a.members.length===t.members.length&&(a.skillname=t.name,a.skillbuff=t.buff,o.push(a))}),o.push(n.CopyByValue(n.Const.team_template)),o.forEach(function(t){for(var n=0;t.members.length<5&&n<r.length;)-1===t.members.findIndex(function(e){return e.character==r[n].character})&&-1===l.indexOf(r[n].id)?t.members.push(card_to_team(r[n],e)):n++});var u=-1,c=null;if(o.forEach(function(e){total=calculate_total(e,a),total>u&&(u=total,c=e)}),null!==c)for(var i=0;i<c.members.length;i++)l.push(c.members[i].id);else console.log(o);return c},arrange_two=function(e,r,t,a,l){var o=[];t.forEach(function(t){var a=n.CopyByValue(n.Const.team_template);t.members.every(function(t){var n=r.findIndex(function(e){return e.character===t&&-1===l.indexOf(e.id)});return-1!==n&&-1===l.indexOf(r[n].id)&&(a.members.push(card_to_team(r[n],e)),!0)}),a.members.length===t.members.length&&(a.skillname=t.name,a.skillbuff=t.buff,o.push(a))}),o.push(n.CopyByValue(n.Const.team_template));for(var u=[],c=0;c<o.length;c++)for(var i=c;i<o.length;i++){for(var m=o[c].skillbuff<o[i].skillbuff?[o[i],o[c]]:[o[c],o[i]],s=n.CopyByValue(m),f=!0,d=0;d<s[0].members.length;d++){var b=s[1].members.findIndex(function(e){return s[0].members[d].id===e.id});if(-1!==b){var g=r.findIndex(function(e){return e.character===s[1].members[b].character&&e.id!==s[1].members[b].id});if(-1===g){f=!1;break}s[1].members[b]=card_to_team(r[g],e)}}f&&u.push(n.CopyByValue(s))}u.forEach(function(t){for(var n=0;t[0].members.length<5&&n<r.length;){var a=t[0].members.findIndex(function(e){return e.character===r[n].character}),l=t[1].members.findIndex(function(e){return e.id===r[n].id});-1===a&&-1===l?t[0].members.push(card_to_team(r[n],e)):n++}for(n=0;t[1].members.length<5&&n<r.length;){a=t[1].members.findIndex(function(e){return e.character===r[n].character});var o=t[0].members.findIndex(function(e){return e.id===r[n].id});-1===a&&-1===o?t[1].members.push(card_to_team(r[n],e)):n++}});var h=-1,v=null;if(u.forEach(function(e){var r=calculate_total(e[0],a),t=calculate_total(e[1],a),n=r+t;if(n>h){if(h=n,r<t){var l=e[0];e[0]=e[1],e[1]=l}v=e}}),null!==v){for(var p=0;p<v[0].members.length;p++)l.push(v[0].members[p].id);for(p=0;p<v[1].members.length;p++)l.push(v[1].members[p].id)}else console.log(u);return v},arrange_three=function(e,r,t,a,l,o){var u=[];t.forEach(function(t){var a=n.CopyByValue(n.Const.team_template);t.members.every(function(t){var n=r.findIndex(function(e){return e.character===t&&-1===l.indexOf(e.id)});return-1!==n&&-1===l.indexOf(r[n].id)&&(a.members.push(card_to_team(r[n],e)),!0)}),a.members.length===t.members.length&&(a.skillname=t.name,a.skillbuff=t.buff,u.push(a))}),u.push(n.CopyByValue(n.Const.team_template));for(var c=[],i=0;i<u.length;i++)for(var m=i;m<u.length;m++)for(var s=m;s<u.length;s++){var f=[];f=u[i].skillbuff<u[m].skillbuff?[u[m],u[i]]:[u[i],u[m]],f=u[s].skillbuff<f[1].skillbuff?f.concat(u[s]):u[s].skillbuff>f[0].skillbuff?[u[s]].concat(f):[f[0],u[s],f[1]];for(var d=n.CopyByValue(f),b=!0,g=0;g<d[0].members.length;g++){var h,v=d[1].members.findIndex(function(e){return d[0].members[g].id===e.id});if(-1!==v){if(-1===(h=r.findIndex(function(e){return e.character===d[1].members[v].character&&e.id!==d[1].members[v].id}))){b=!1;break}d[1].members[v]=card_to_team(r[h],e)}if(-1!==(_=d[2].members.findIndex(function(e){return d[0].members[g].id===e.id}))){if(-1===(p=r.findIndex(function(e){return e.character===d[2].members[_].character&&(e.id!==d[2].members[_].id&&(-1===v||e.id!==r[h].id))}))){b=!1;break}d[2].members[_]=card_to_team(r[p],e)}}for(g=0;g<d[1].members.length;g++){var p,_=d[2].members.findIndex(function(e){return d[1].members[g].id===e.id}),y=d[0].members.findIndex(function(e){return d[1].members[g].id===e.id});if(-1!==_&&-1===y){if(-1===(p=r.findIndex(function(e){return e.character===d[2].members[_].character&&e.id!==d[2].members[_].id}))){b=!1;break}d[2].members[_]=card_to_team(r[p],e)}}b&&c.push(n.CopyByValue(d))}c.forEach(function(t){for(var n=0;t[0].members.length<5&&n<r.length;){var a=t[0].members.findIndex(function(e){return e.character===r[n].character}),l=t[1].members.findIndex(function(e){return e.id===r[n].id}),o=t[2].members.findIndex(function(e){return e.id===r[n].id});-1===a&&-1===l&&-1===o?t[0].members.push(card_to_team(r[n],e)):n++}for(n=0;t[1].members.length<5&&n<r.length;){a=t[1].members.findIndex(function(e){return e.character===r[n].character});var u=t[0].members.findIndex(function(e){return e.id===r[n].id});o=t[2].members.findIndex(function(e){return e.id===r[n].id});-1===a&&-1===u&&-1===o?t[1].members.push(card_to_team(r[n],e)):n++}for(n=0;t[2].members.length<5&&n<r.length;){a=t[2].members.findIndex(function(e){return e.character===r[n].character}),u=t[0].members.findIndex(function(e){return e.id===r[n].id}),l=t[1].members.findIndex(function(e){return e.id===r[n].id});-1===a&&-1===u&&-1===l?t[2].members.push(card_to_team(r[n],e)):n++}});var k=null,C=[-1,-1,-1],x=[-1,-1,-1];if(c.forEach(function(e){if(x[0]=calculate_total(e[0],a),x[1]=calculate_total(e[1],a),x[2]=calculate_total(e[2],a),x[0]<x[1]?x[1]<x[2]?(e=[e[2],e[1],e[0]],x=[x[2],x[1],x[0]]):x[2]<x[0]?(e=[e[1],e[0],e[2]],x=[x[1],x[0],x[2]]):(e=[e[1],e[2],e[0]],x=[x[1],x[2],x[0]]):x[0]<x[2]?(e=[e[2],e[0],e[1]],x=[x[2],x[0],x[1]]):x[2]<x[1]||(e=[e[0],e[2],e[1]],x=[x[0],x[2],x[1]]),o(x,C)){for(var r=0;r<3;r++)C[r]=x[r];k=e}}),null!==k){for(s=0;s<k[0].members.length;s++)l.push(k[0].members[s].id);for(s=0;s<k[1].members.length;s++)l.push(k[1].members[s].id);for(s=0;s<k[2].members.length;s++)l.push(k[2].members[s].id)}else console.log(c);return k},multiple_skill=function(e,r){var t=0,a=r.length;do{for(var l=r.length,o=l-1;o>=t;o--)for(var u=o<a?o-1:a-1;u>=0;u--){var c=r[o],i=r[u],m=c.members.concat(i.members).dupe();if(m.length!=c.members.length+i.members.length&&m.length<=5)if(void 0===r.find(function(e){if(n.CopyByValue(e.members).sort().equals(m.sort())){var r=e.name.split("+"),t=c.name.split("+"),a=i.name.split("+"),l=t.concat(a).dupe();return l.length!==t.length+a.length||l.length===r.length}return!1})){var s=0;for(u=0;u<m.length;u++)if(c.members.indexOf(m[u])>-1&&i.members.indexOf(m[u])>-1){var f=m[u];m[u]=m[s],m[s]=f,s++}m.length===c.members.length&&(r.splice(o,1),o<a&&a--,o<l&&l--),m.length===i.members.length&&(r.splice(u,1),u<a&&a--,u<l&&l--),r.push({name:c.name+"+"+i.name,members:m,buff:c.buff+i.buff})}}t=l}while(t!==r.length);return r},e.exports={sort_cards:sort_cards,calculate_total:calculate_total,arrange_one:arrange_one,arrange_two:arrange_two,arrange_three:arrange_three,multiple_skill:multiple_skill}},function(e,r){}]);